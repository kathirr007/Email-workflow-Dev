<html>

<head>
    <title>Node.JS Email application</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            
        });
    </script>
    <style>
        #container {
            margin-left: 400px;
            margin-top: 50px;
        }

        #to,
        #subject,
        #content, #htmlContent {
            font-family: "Segoe UI";
            font-size: 18px;
            width: 530px;
        }

        h1 {
            font-family: "Segoe UI";
            font-size: 40px;
            color: #3b5998;
        }

        p {
            color: green;
        }

        #send_email {
            font-size: 15px;
            font-family: "Segoe UI";
        }

        #message {
            font-size: 18px;
        }
    </style>
</head>

<body>
    <div id="container">
        <h1>Mailer In Node.JS</h1>
        <!-- <form action="" method="GET" id="emailForm" name="emailForm" enctype="multipart/form-data">
        </form> -->
        <input type="text" id="to" placeholder="Enter E-mail ID where you want to send"><br>
        <input type="text" id="subject" placeholder="Write Subject"><br>
        <textarea id="content" rows="5" cols="40" placeholder="Write what you want to send"></textarea><br>
        <textarea id="htmlContent" rows="5" cols="40" placeholder="Place your HTML Content here..."></textarea><br>
        <input id="mailAttachments" name="mailAttachments" type="file"><br>
        <button id="send_email" type="button">Send Email</button><br>
        <span id="message"></span>
    </div>
    <script>
        $(document).ready(function () {
            var from, to, subject, text, htmlContent, mailAttachments, filename;
            var input = document.getElementById("mailAttachments");
            var fReader = new FileReader();
            // fReader.readAsDataURL(input.files[0]);
            fReader.onloadend = function(event){
                mailAttachments = event.target.result;
            }
            /* sendMail = function (e) {
                e.preventDefault();
                to = $("#to").val();
                subject = $("#subject").val();
                text = $("#content").val();
                htmlContent = $('#htmlContent').val();
                mailAttachments = mailAttachments;
                filename = $('#mailAttachments').val().split(/(\\|\/)/ig).pop();
                $("#message").text("Sending E-mail...Please wait");
                $.get("http://localhost:3000/send", {
                    to: to,
                    subject: subject,
                    text: text,
                    htmlContent: htmlContent,
                    // mailAttachments: mailAttachments,
                    // filename: filename,
                }, function (data) {
                    if (data == "sent") {
                        $("#message").empty().html("<p>Email is been sent at " + to +
                            " . Please check inbox !</p>");
                    }
                });
            } */
            $(document).on('click', "#send_email", function(e) {
                e.preventDefault();
                to = $("#to").val();
                subject = $("#subject").val();
                text = $("#content").val();
                htmlContent = $('#htmlContent').val();
                mailAttachments = mailAttachments;
                filename = $('#mailAttachments').val().split(/(\\|\/)/ig).pop();
                $("#message").text("Sending E-mail...Please wait");
                $.get("http://localhost:3000/send", {
                    to: to,
                    subject: subject,
                    text: text,
                    htmlContent: htmlContent,
                    // mailAttachments: mailAttachments,
                    // filename: filename,
                }, function (data) {
                    if (data == "sent") {
                        $("#message").empty().html("<p>Email is been sent at " + to +
                            " . Please check inbox !</p>");
                    }
                });
            });
        })
    </script>
</body>

</html>